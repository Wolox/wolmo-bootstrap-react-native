import { createAppContainer } from 'react-navigation';
import { createStackNavigator } from 'react-navigation-stack';
<%_ if(features.tabs) { _%> 
import { createBottomTabNavigator } from 'react-navigation-tabs';
<%_ } _%>
<%_ if(features.drawer) { _%> 
import { createDrawerNavigator } from 'react-navigation-drawer';
<%_ } _%>
import createAnimatedSwitchNavigator from 'react-navigation-animated-switch';
import Routes from '@constants/routes';
import {
  appScreensNavOptions,
  appStackNavConfig,
  <%_ if(features.tabs) { _%> 
  appTabNavConfig,
  <%_ } _%>
  authStackNavConfig,
  <%_ if(features.drawer) { _%> 
  drawerStackNavConfig,
  <%_ } _%>
  mainSwitchNavConfig
} from '@config/navigation';
import { inferRoute } from '@utils/navUtils';
<%_ if(features.login) { _%>
import InitialLoading from '@screens/InitialLoading';
import Login from '@screens/Login';
<%_ } _%>
import Home from '@screens/Home';

<%_ if(features.login) { _%>
const AuthStack = createStackNavigator(
  {
    ...inferRoute({ Login })
  },
  authStackNavConfig
);
<%_ } _%>

const AppStack = createStackNavigator(
  {
    [Routes.Home]: {
      <%_ if (features.tabs) { _%>
      screen: createBottomTabNavigator(
        {
          ...inferRoute({ Tab1: Home }),
          ...inferRoute({ Tab2: Home })
        },
        appTabNavConfig
      ),
      <%_ } else { _%>
      screen: Home,
      <%_ } _%>
      navigationOptions: appScreensNavOptions[Routes.Home]
    }
  },
  appStackNavConfig
);

<%_ if(features.drawer) { _%>
const DrawerStack = createDrawerNavigator(
  {
    [Routes.App]: AppStack,
    // TODO: Modify drawer screens here
    Example1: { screen: Home },
    Example2: { screen: Home }
  },
  drawerStackNavConfig
);
<%_ } _%>

export default createAppContainer(
  createAnimatedSwitchNavigator(
    {
      <%_ if(features.login) { _%>
      ...inferRoute({ InitialLoading }),
      [Routes.Auth]: AuthStack,
      <%_ } _%>
      <%_ if(features.drawer) { _%>
      [Routes.App]: DrawerStack
      <%_ } else { _%>
      [Routes.App]: AppStack
      <%_ } _%>
      // TODO: You can add for example an Onboarding flow here
      // [Routes.Onboarding]: Onboarding
    },
    mainSwitchNavConfig
  )
);
